class LoaderGenerator extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.elements={},this.eventHandlers=new Map,this.initialized=!1,this.configDefaults={animationType:"spinner",bgColor:"#ffffff",animationColor:"#4483f5",minDisplayTime:500,hideDelay:100,hideDuration:300,customCssCode:""}}async connectedCallback(){this.initialized||(await this.init(),this.initialized=!0)}disconnectedCallback(){this.destroy()}async init(){await this.render(),this.findElements(),this.bindEvents(),this.setInitialState()}async render(){const e=this.getTemplate(),t=this.getStyles();this.shadowRoot.innerHTML=`\n      <style>${t}</style>\n      ${e}\n    `}getStyles(){return":host{box-sizing:border-box;display:block;font-family:Inter,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif;max-width:100%;width:100%}*{box-sizing:border-box}.loader-generator{--primary-color:#4483f5;--primary-hover:#3a70d1;--primary-light:rgba(68,131,245,.15);--primary-gradient:linear-gradient(90deg,#4483f5,#5e6ffd);--text-dark:#333;--text-medium:#555;--text-light:#777;--border-color:#ddd;--bg-light:#f8f9fa;--shadow-sm:0 2px 5px rgba(0,0,0,.05);--shadow-md:0 4px 12px rgba(0,0,0,.08);--radius-sm:6px;--radius-md:10px;--transition:all 0.2s ease;background:linear-gradient(180deg,#f8f9fa,#f0f3f7);border:1px solid rgba(0,0,0,.05);border-radius:var(--radius-md);box-shadow:var(--shadow-md);color:var(--text-dark);min-width:350px;overflow:hidden}.form-grid,.loader-generator{max-width:100%;padding:15px;width:100%}.form-grid{background:#fff;border-radius:var(--radius-md);box-shadow:var(--shadow-sm);display:flex;flex-direction:column;gap:15px;margin-bottom:20px;max-height:calc(100vh - 348px);min-height:0;overflow:auto}.setting-group{flex-shrink:1;min-width:0;width:100%}.setting-group label{color:var(--text-dark);display:block;font-size:14px;font-weight:500;margin-bottom:8px}.number-input,.select-styled,.text-input{background:#fff;border:1px solid var(--border-color);border-radius:var(--radius-sm);box-shadow:var(--shadow-sm);box-sizing:border-box;color:var(--text-dark);font-size:14px;max-width:100%;min-width:0;padding:8px 10px;transition:var(--transition);width:100%}.number-input:focus,.select-styled:focus,.text-input:focus{border-color:var(--primary-color);box-shadow:0 0 0 3px var(--primary-light);outline:none}.select-styled{appearance:none;background-image:url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3E%3C/svg%3E\");background-position:right 8px center;background-repeat:no-repeat;background-size:16px;cursor:pointer;padding-right:32px}.helper-text{color:var(--text-light);font-size:13px;line-height:1.4;margin-top:5px}.section-title{border-bottom:2px solid var(--bg-light);color:var(--text-dark);font-size:16px;font-weight:600;padding-bottom:8px}.action-section{display:flex;justify-content:center;margin-top:20px}.generate-button{align-items:center;background:var(--primary-gradient);border:none;border-radius:var(--radius-sm);box-shadow:0 4px 12px rgba(68,131,245,.3);color:#fff;cursor:pointer;display:inline-flex;font-size:16px;font-weight:500;gap:8px;justify-content:center;padding:12px 24px;transition:var(--transition)}.generate-button:hover{box-shadow:0 6px 16px rgba(68,131,245,.4);transform:translateY(-2px)}.generate-button:active{box-shadow:0 2px 8px rgba(68,131,245,.3);transform:translateY(0)}.color-input{border:1px solid var(--border-color);border-radius:var(--radius-sm);box-shadow:var(--shadow-sm);cursor:pointer;height:40px;padding:4px;transition:var(--transition);width:100%}.color-input:hover{border-color:var(--primary-color)}.textarea-input{font-family:monospace;font-size:13px;line-height:1.4;min-height:120px;resize:vertical}.conditional-field{margin-top:10px;transition:all .3s ease}.conditional-field.hidden{display:none}.preview-section{border-top:1px solid var(--border-color);margin-top:20px;padding-top:15px}.preview-title{border-bottom:none;color:var(--primary-color);font-size:16px;font-weight:600;margin-bottom:15px;text-align:center}.preview-area{background-color:#fff;border:1px dashed var(--border-color);border-radius:var(--radius-md);height:150px;overflow:hidden;position:relative;transition:background-color .3s ease;width:100%}.preview-animation,.preview-area{align-items:center;display:flex;justify-content:center}.preview-animation.spinner{animation:spin 1s linear infinite;border:4px solid rgba(0,0,0,.1);border-radius:50%;height:40px;width:40px}.preview-animation.dots{display:flex;gap:5px}.preview-animation.dots div{animation:bounce 1.4s ease-in-out infinite both;border-radius:50%;height:12px;width:12px}.preview-animation.dots div:first-child{animation-delay:-.32s}.preview-animation.dots div:nth-child(2){animation-delay:-.16s}.preview-animation.bars{align-items:center;display:flex;gap:2px;height:40px}.preview-animation.bars div{animation:stretch 1.2s ease-in-out infinite;height:100%;width:6px}.preview-animation.bars div:first-child{animation-delay:-1.1s}.preview-animation.bars div:nth-child(2){animation-delay:-1s}.preview-animation.bars div:nth-child(3){animation-delay:-.9s}.preview-animation.bars div:nth-child(4){animation-delay:-.8s}.preview-animation.bars div:nth-child(5){animation-delay:-.7s}@keyframes spin{0%{transform:rotate(0deg)}to{transform:rotate(1turn)}}@keyframes bounce{0%,80%,to{transform:scale(0)}40%{transform:scale(1)}}@keyframes stretch{0%,40%,to{transform:scaleY(.4)}20%{transform:scaleY(1)}}"}getTemplate(){return'<div class="loader-generator"><div class="form-grid"><div class="section-title">1. Внешний вид</div><div class="setting-group"><label for="animation-type">Тип анимации:</label><select id="animation-type" class="select-styled"><option value="spinner" selected>Spinner (Круг)</option><option value="dots">Dots (Точки)</option><option value="bars">Bars (Полосы)</option><option value="custom">Custom CSS</option></select></div><div class="setting-group"><label for="bg-color">Цвет фона оверлея:</label><input type="color" id="bg-color" class="color-input" value="#ffffff"><div class="helper-text">Цвет фона, перекрывающего страницу</div></div><div class="setting-group" id="animation-color-group"><label for="animation-color">Цвет анимации:</label><input type="color" id="animation-color" class="color-input" value="#4483f5"><div class="helper-text">Основной цвет анимированных элементов</div></div><div class="setting-group conditional-field hidden" id="custom-css-group"><label for="custom-css">CSS-код загрузчика:</label><textarea id="custom-css" class="text-input textarea-input" placeholder=\'/* HTML: <div class="loader"></div> */\n.loader {\n  /* ... стили вашего лоадера ... */\n}\'></textarea><div class="helper-text">Вставьте CSS с сайта css-loaders.com или cssloaders.github.io. Класс .loader будет автоматически адаптирован.</div></div><div class="section-title">2. Тайминги</div><div class="setting-group"><label for="min-display-time">Мин. длительность показа (мс):</label><input type="number" id="min-display-time" class="number-input" value="500" min="0" step="100"><div class="helper-text">Минимальное время показа лоадера. 0 = отключить</div></div><div class="setting-group"><label for="hide-delay">Пауза перед скрытием (мс):</label><input type="number" id="hide-delay" class="number-input" value="100" min="0" step="50"><div class="helper-text">Пауза после загрузки контента. 0 = отключить</div></div><div class="setting-group"><label for="hide-duration">Плавность исчезновения (мс):</label><input type="number" id="hide-duration" class="number-input" value="300" min="0" step="50"><div class="helper-text">Время анимации fade-out при скрытии</div></div><div class="preview-section"><div class="preview-title">Предпросмотр</div><div class="preview-area" id="preview-area"><div class="preview-animation" id="preview-animation"></div></div></div></div><div class="action-section"><button class="generate-button" id="generate-btn"><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><path d="M16 18l6-6-6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M8 6l-6 6 6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg><span>Сгенерировать код</span></button></div></div>'}findElements(){this.elements.generateBtn=this.shadowRoot.getElementById("generate-btn"),this.elements.animationType=this.shadowRoot.getElementById("animation-type"),this.elements.bgColor=this.shadowRoot.getElementById("bg-color"),this.elements.animationColor=this.shadowRoot.getElementById("animation-color"),this.elements.animationColorGroup=this.shadowRoot.getElementById("animation-color-group"),this.elements.customCss=this.shadowRoot.getElementById("custom-css"),this.elements.customCssGroup=this.shadowRoot.getElementById("custom-css-group"),this.elements.minDisplayTime=this.shadowRoot.getElementById("min-display-time"),this.elements.hideDelay=this.shadowRoot.getElementById("hide-delay"),this.elements.hideDuration=this.shadowRoot.getElementById("hide-duration"),this.elements.previewArea=this.shadowRoot.getElementById("preview-area"),this.elements.previewAnimation=this.shadowRoot.getElementById("preview-animation"),this.elements.successPopup=document.querySelector(".pop-up-success"),this.elements.popupAcceptBtn=document.querySelector("[data-popup-accept-btn]"),this.elements.popupCloseBtn=document.querySelector("[data-popup-close-btn]")}bindEvents(){if(this.elements.generateBtn){const e=()=>this.generateCode();this.eventHandlers.set("generate",e),this.elements.generateBtn.addEventListener("click",e)}if([this.elements.bgColor,this.elements.animationColor,this.elements.customCss].forEach(e=>{if(e){const t="input",i=()=>this.updatePreview();this.eventHandlers.set(`preview-${e.id}`,i),e.addEventListener(t,i)}}),this.elements.animationType){const e=()=>this.handleAnimationTypeChange();this.eventHandlers.set("animation-type-change",e),this.elements.animationType.addEventListener("change",e)}this.bindModalEvents()}bindModalEvents(){if(this.elements.popupAcceptBtn){const e=()=>this.hideSuccessPopup();this.eventHandlers.set("popup-accept",e),this.elements.popupAcceptBtn.addEventListener("click",e)}if(this.elements.popupCloseBtn){const e=()=>this.hideSuccessPopup();this.eventHandlers.set("popup-close",e),this.elements.popupCloseBtn.addEventListener("click",e)}if(this.elements.successPopup){const e=e=>{e.target===this.elements.successPopup&&this.hideSuccessPopup()};this.eventHandlers.set("popup-overlay",e),this.elements.successPopup.addEventListener("click",e)}}setInitialState(){this.elements.animationType&&(this.elements.animationType.value=this.configDefaults.animationType,this.elements.bgColor.value=this.configDefaults.bgColor,this.elements.animationColor.value=this.configDefaults.animationColor,this.elements.minDisplayTime.value=this.configDefaults.minDisplayTime,this.elements.hideDelay.value=this.configDefaults.hideDelay,this.elements.hideDuration.value=this.configDefaults.hideDuration,this.elements.customCss.value=this.configDefaults.customCssCode,this.handleAnimationTypeChange())}handleAnimationTypeChange(){const e=this.elements.animationType?.value,t="custom"===e;this.elements.customCssGroup&&this.elements.customCssGroup.classList.toggle("hidden",!t),this.elements.animationColorGroup&&this.elements.animationColorGroup.classList.toggle("hidden",t),this.updatePreview()}updatePreview(){if(!this.elements.previewArea||!this.elements.previewAnimation)return;const e=this.elements.animationType.value,t=this.elements.animationColor.value,i=this.elements.customCss.value;this.elements.previewArea.style.backgroundColor=this.elements.bgColor.value,this.elements.previewAnimation.innerHTML="",this.elements.previewAnimation.className="preview-animation";const n=this.shadowRoot.getElementById("custom-preview-style");switch(n&&n.remove(),e){case"spinner":this.elements.previewAnimation.classList.add("spinner"),this.elements.previewAnimation.style.borderLeftColor=t;break;case"dots":this.elements.previewAnimation.classList.add("dots"),this.elements.previewAnimation.innerHTML=`\n          <div style="background-color: ${t}"></div>\n          <div style="background-color: ${t}"></div>\n          <div style="background-color: ${t}"></div>\n        `;break;case"bars":this.elements.previewAnimation.classList.add("bars"),this.elements.previewAnimation.innerHTML=`\n          <div style="background-color: ${t}"></div>\n          <div style="background-color: ${t}"></div>\n          <div style="background-color: ${t}"></div>\n          <div style="background-color: ${t}"></div>\n          <div style="background-color: ${t}"></div>\n        `;break;case"custom":if(i){this.elements.previewAnimation.innerHTML='<div class="taptop-custom-loader-preview"></div>';const e=this.processCustomCss(i,"loader","taptop-custom-loader-preview"),t=document.createElement("style");t.id="custom-preview-style",t.textContent=e,this.shadowRoot.appendChild(t)}}}processCustomCss(e,t,i){if(!e||!t||!i)return e||"";const n=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=new RegExp(`\\.${n(t)}(?![-\\w])`,"g");let a=e.replace(s,`.${i}`);return["before","after"].forEach(e=>{const s=new RegExp(`\\.${n(t)}::${e}(?![-\\w])`,"g"),o=new RegExp(`\\.${n(t)}:${e}(?![-\\w])`,"g");a=a.replace(s,`.${i}::${e}`),a=a.replace(o,`.${i}:${e}`)}),a}collectData(){const e=this.elements.animationType?.value||"spinner",t=this.elements.bgColor?.value||"#ffffff",i=this.elements.animationColor?.value||"#4483f5",n=parseInt(this.elements.minDisplayTime?.value,10),s=parseInt(this.elements.hideDelay?.value,10),a=parseInt(this.elements.hideDuration?.value,10);let o="";return"custom"===e&&(o=this.elements.customCss?.value.trim()||""),isNaN(n)||n<0?(alert("Минимальное время показа должно быть неотрицательным числом."),null):isNaN(s)||s<0?(alert("Задержка перед скрытием должна быть неотрицательным числом."),null):isNaN(a)||a<0?(alert("Длительность скрытия должна быть неотрицательным числом."),null):"custom"!==e||o?{animationType:e,bgColor:t,animationColor:i,minDisplayTime:n,hideDelay:s,hideDuration:a,customCssCode:o}:(alert("Для типа 'Custom CSS' необходимо вставить CSS-код загрузчика."),null)}async generateCode(){try{const e=this.collectData();if(!e)return;const t=this.generateLoaderCode(e),i=await this.minifyGeneratedCode(t);await this.copyToClipboard(i),this.showSuccessPopup()}catch(e){console.error("Ошибка генерации кода:",e),alert("Произошла ошибка при генерации кода. Попробуйте еще раз.")}}generateLoaderCode(e){const{animationType:t,bgColor:i,animationColor:n,minDisplayTime:s,hideDelay:a,hideDuration:o,customCssCode:r}=e,l="taptop-loader-generated",d="taptop-loader__overlay",p="taptop-loader__animation",c="taptop-custom-loader-animation",m="taptop-loader--hidden";let h="",u="";switch(t){case"dots":h=`\n          <div class="${p}">\n            <div class="taptop-loader__dot"></div>\n            <div class="taptop-loader__dot"></div>\n            <div class="taptop-loader__dot"></div>\n          </div>`,u=`\n          .${p} > .taptop-loader__dot { \n            width: 12px; height: 12px; margin: 0 5px; background-color: ${n};\n            border-radius: 50%; display: inline-block;\n            animation: taptop-loader-dots-bounce 1.4s infinite ease-in-out both;\n          }\n          .${p} > .taptop-loader__dot:nth-child(1) { animation-delay: -0.32s; }\n          .${p} > .taptop-loader__dot:nth-child(2) { animation-delay: -0.16s; }\n          @keyframes taptop-loader-dots-bounce {\n            0%, 80%, 100% { transform: scale(0); }\n            40% { transform: scale(1.0); }\n          }`;break;case"bars":h=`\n          <div class="${p}">\n            <div class="taptop-loader__bar"></div>\n            <div class="taptop-loader__bar"></div>\n            <div class="taptop-loader__bar"></div>\n            <div class="taptop-loader__bar"></div>\n            <div class="taptop-loader__bar"></div>\n          </div>`,u=`\n          .${p} { display: flex; align-items: center; height: 50px; }\n          .${p} > .taptop-loader__bar {\n            background-color: ${n}; height: 100%; width: 6px; margin: 0 2px;\n            display: inline-block; animation: taptop-loader-bars-stretch 1.2s infinite ease-in-out;\n          }\n          .${p} > .taptop-loader__bar:nth-child(1) { animation-delay: -1.1s; }\n          .${p} > .taptop-loader__bar:nth-child(2) { animation-delay: -1.0s; }\n          .${p} > .taptop-loader__bar:nth-child(3) { animation-delay: -0.9s; }\n          .${p} > .taptop-loader__bar:nth-child(4) { animation-delay: -0.8s; }\n          .${p} > .taptop-loader__bar:nth-child(5) { animation-delay: -0.7s; }\n          @keyframes taptop-loader-bars-stretch {\n            0%, 40%, 100% { transform: scaleY(0.4); }\n            20% { transform: scaleY(1.0); }\n          }`;break;case"custom":h=`<div class="${p}"><div class="${c}"></div></div>`,u=this.processCustomCss(r,"loader",c);break;default:h=`<div class="${p}"><div class="taptop-loader__spinner"></div></div>`,u=`\n          .${p} > .taptop-loader__spinner {\n            width: 40px; height: 40px; border: 4px solid rgba(0,0,0,0.1);\n            border-left-color: ${n}; border-radius: 50%;\n            animation: taptop-loader-spin 1s linear infinite;\n          }\n          @keyframes taptop-loader-spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }`}return`<style>\n  \n  .${d} {\n    position: fixed; inset: 0; background-color: ${i};\n    z-index: 99999; display: flex; align-items: center; justify-content: center;\n    opacity: 1; transition: opacity ${o}ms ease-out;\n  }\n  .${m} { opacity: 0; pointer-events: none; }\n  .${p} {\n    display: flex; align-items: center; justify-content: center;\n  }\n  \n  ${u}\n</style>\n<div id="${l}" class="${d}">\n  ${h}\n</div>\n<script>\n  (function() {\n    const loaderElement = document.getElementById('${l}');\n    if (!loaderElement) return;\n    const config = {\n        minDisplayTime: ${s}, hideDelay: ${a}, hideDuration: ${o}\n    };\n    let pageLoaded = false;\n    const startTime = Date.now();\n\n    function attemptToHideLoader() {\n        if (!pageLoaded) return;\n\n        const elapsedTime = Date.now() - startTime;\n        const timeToShowFurther = Math.max(0, config.minDisplayTime - elapsedTime);\n\n        setTimeout(() => {\n            loaderElement.classList.add('${m}');\n            setTimeout(() => {\n                loaderElement.remove();\n            }, config.hideDuration);\n        }, config.hideDelay + timeToShowFurther);\n    }\n\n    window.addEventListener('load', () => {\n        pageLoaded = true;\n        attemptToHideLoader();\n    });\n\n    if (config.minDisplayTime > 0) {\n        setTimeout(() => {\n            attemptToHideLoader();\n        }, config.minDisplayTime - (Date.now() - startTime) > 0 ? config.minDisplayTime - (Date.now() - startTime) : 0);\n    } \n    \n    setTimeout(() => {\n        if (!pageLoaded && loaderElement.parentElement) {\n            console.warn('Taptop Loader: Fallback timeout triggered. Forcing hide.');\n            pageLoaded = true;\n            attemptToHideLoader();\n        }\n    }, Math.max(15000, config.minDisplayTime + config.hideDelay + config.hideDuration + 2000));\n  })();\n<\/script>`}async minifyGeneratedCode(e){try{const t=this.parseGeneratedCode(e),i=t.css?this.minifyCSS(t.css):"",n=t.js?this.minifyJS(t.js):"",s=t.html?this.minifyHTML(t.html):"";let a="";return s&&(a+=s),i&&(a+=`<style>${i}</style>`),n&&(a+=`<script>${n}<\/script>`),a}catch(t){return console.warn("Минификация генерируемого кода не удалась, используем оригинал:",t),e}}parseGeneratedCode(e){const t={css:"",js:"",html:""},i=/<style[^>]*>([\s\S]*?)<\/style>/gi;let n;for(;null!==(n=i.exec(e));)t.css+=n[1];const s=/<script[^>]*>([\s\S]*?)<\/script>/gi;for(;null!==(n=s.exec(e));)t.js+=n[1];return t.html=e.replace(/<style[^>]*>[\s\S]*?<\/style>/gi,"").replace(/<script[^>]*>[\s\S]*?<\/script>/gi,"").trim(),t}minifyCSS(e){return e.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\s+/g," ").replace(/\s*([{}:;,>+~])\s*/g,"$1").replace(/;}/g,"}").replace(/\s*\(\s*/g,"(").replace(/\s*\)\s*/g,")").replace(/#([a-f0-9])\1([a-f0-9])\2([a-f0-9])\3/gi,"#$1$2$3").trim()}minifyHTML(e){return e?e.replace(/<!--[\s\S]*?-->/g,"").replace(/>\s+</g,"><").replace(/\s+/g," ").trim():""}minifyJS(e){let t=e;return t=this.removeJSComments(t),t=t.replace(/const\s+([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=\s*/g,"const $1=").replace(/let\s+([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=\s*/g,"let $1=").replace(/var\s+([a-zA-Z_$][a-zA-Z0-9_$]*)\s*=\s*/g,"var $1="),t=t.replace(/{\s*([^}]+)\s*}/g,(e,t)=>`{${t.replace(/\s*:\s*/g,":").replace(/\s*,\s*/g,",")}}`).replace(/\[\s*([^\]]+)\s*\]/g,(e,t)=>`[${t.replace(/\s*,\s*/g,",")}]`),t=t.replace(/\s*([=+\-*/%<>&|!])\s*/g,"$1").replace(/\s*([(){}[\];,])\s*/g,"$1").replace(/\s+/g," ").replace(/\b(if|for|while|switch|catch|function|return|throw|new|typeof)\s+/g,"$1 ").replace(/\belse\s+/g,"else ").replace(/\s*\n\s*/g,"\n").replace(/\n+/g,"\n").trim(),t=t.replace(/\btrue\b(?=\s*[,;\}\)\]])/g,"!0").replace(/\bfalse\b(?=\s*[,;\}\)\]])/g,"!1").replace(/\bundefined\b(?=\s*[,;\}\)\]])/g,"void 0"),t}removeJSComments(e){let t="",i=!1,n="",s=!1,a=!1;for(let o=0;o<e.length;o++){const r=e[o],l=e[o+1]||"";if(!s&&!a){if(!(i||'"'!==r&&"'"!==r&&"`"!==r)){i=!0,n=r,t+=r;continue}if(i&&r===n&&"\\"!==e[o-1]){i=!1,t+=r;continue}if(i){t+=r;continue}}if(!i){if(!s&&!a&&"/"===r&&"*"===l){s=!0,o++;continue}if(s&&"*"===r&&"/"===l){s=!1,o++;continue}if(!s&&!a&&"/"===r&&"/"===l){a=!0,o++;continue}if(a&&("\n"===r||"\r"===r)){a=!1,t+=r;continue}}s||a||(t+=r)}return t}async copyToClipboard(e){try{await navigator.clipboard.writeText(e),console.log("Код скопирован в буфер обмена")}catch(t){this.fallbackCopy(e)}}fallbackCopy(e){const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-9999px",document.body.appendChild(t);try{if(t.select(),!document.execCommand("copy"))throw new Error("Не удалось скопировать код в буфер обмена");console.log("Код скопирован в буфер обмена (fallback)")}finally{document.body.removeChild(t)}}showSuccessPopup(){this.elements.successPopup&&(this.elements.successPopup.style.display="flex")}hideSuccessPopup(){this.elements.successPopup&&(this.elements.successPopup.style.display="none")}unbindEvents(){this.eventHandlers.forEach((e,t)=>{if(t.startsWith("preview-")){const i=t.replace("preview-",""),n=this.shadowRoot.getElementById(i);n&&n.removeEventListener("input",e)}}),this.elements.generateBtn&&this.eventHandlers.has("generate")&&this.elements.generateBtn.removeEventListener("click",this.eventHandlers.get("generate")),this.elements.animationType&&this.eventHandlers.has("animation-type-change")&&this.elements.animationType.removeEventListener("change",this.eventHandlers.get("animation-type-change")),this.unbindModalEvents(),this.eventHandlers.clear()}unbindModalEvents(){this.elements.popupAcceptBtn&&this.eventHandlers.has("popup-accept")&&this.elements.popupAcceptBtn.removeEventListener("click",this.eventHandlers.get("popup-accept")),this.elements.popupCloseBtn&&this.eventHandlers.has("popup-close")&&this.elements.popupCloseBtn.removeEventListener("click",this.eventHandlers.get("popup-close")),this.elements.successPopup&&this.eventHandlers.has("popup-overlay")&&this.elements.successPopup.removeEventListener("click",this.eventHandlers.get("popup-overlay"))}destroy(){this.unbindEvents(),this.initialized=!1}}customElements.define("loader-generator",LoaderGenerator);